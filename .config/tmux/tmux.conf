unbind C-b
set -g prefix C-SPACE
bind-key C-SPACE send-prefix

set -g mode-keys vi
set -g default-terminal "tmux-256color:RGB"
set -g allow-passthrough on
set -g set-clipboard on

# Other tweaks for usability
set -g mouse on 
set -g history-limit 10000  # Larger scrollback
set -g base-index 1  # Start windows/panes at 1, not 0
set -g pane-base-index 1

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R


# Split windows (opens in same directory)
unbind %
bind | split-window -h -c "#{pane_current_path}"

unbind '"'
bind - split-window -v -c "#{pane_current_path}"

# Reload config
unbind r
bind r source-file "~/.config/tmux/tmux.conf"

# Alt+hjkl to switch panes without prefix
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Alt+number to select window
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# bind-key prefix s copy-mode
bind-key -T copy-mode-vi v send-keys -X cancel  # Exit to normal
bind-key -T copy-mode-vi j send-keys -X cursor-down  # Scroll down
bind-key -T copy-mode-vi k send-keys -X cursor-up    # Scroll up
bind-key -T copy-mode-vi d send-keys -X halfpage-down
bind-key -T copy-mode-vi u send-keys -X halfpage-up

# Search (like / and ? in vi)
bind-key -T copy-mode-vi / command-prompt -i -p "search down" "send -X search-forward-incremental \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -i -p "search up" "send -X search-backward-incremental \"%%%\""

bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X select-line
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

set -g status-position top
set -g status-left-length 100
set -g status-style "fg=white,bg=default"
set -g status-left "#[fg=green,bold] #S #[fg=white,nobold] | "
set -g window-status-current-format "#[fg=cyan,bold]  #[underscore]#I:#W"
set -g window-status-format " #I:#W"
set -g message-style "fg=white,bg=default"
set -g mode-style "fg=gray,bg=blue"
set -g pane-border-style "fg=gray"
set -g pane-active-border-style "fg=green"

set -g status-right "#[fg=yellow,bold]#{client_key_table}#[default,nobold] | %Y-%m-%d %H:%M"
